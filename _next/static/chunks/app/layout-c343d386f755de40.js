(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[177],{347:()=>{},1382:(e,t,a)=>{"use strict";a.d(t,{default:()=>n});var s=a(5155),r=a(2115);function n(e){let{height:t=3,color:a="#0ea5e9",zIndex:n=60,glow:l=!0}=e,[o,i]=(0,r.useState)(0);return(0,r.useEffect)(()=>{let e=()=>{let e=document.documentElement.scrollHeight-window.innerHeight,t=Math.min(Math.max(window.scrollY,0),Math.max(e,0));i(e>0?t/e*100:0)},t=0,a=()=>{cancelAnimationFrame(t),t=requestAnimationFrame(e)};return window.addEventListener("scroll",a,{passive:!0}),window.addEventListener("resize",a),e(),()=>{window.removeEventListener("scroll",a),window.removeEventListener("resize",a),cancelAnimationFrame(t)}},[]),(0,s.jsx)("div",{style:{position:"fixed",top:0,left:0,right:0,height:t,zIndex:n,pointerEvents:"none",background:"transparent"},children:(0,s.jsx)("div",{style:{width:"".concat(o,"%"),height:"100%",background:a,transition:"width 60ms linear",boxShadow:l?"0 0 10px ".concat(a,"80, 0 0 4px ").concat(a,"80"):"none"}})})}},2965:(e,t,a)=>{"use strict";a.d(t,{default:()=>d});var s=a(5155),r=a(2115),n=a(5695),l=a(6874),o=a.n(l),i=a(9137),c=a.n(i);function f(){let e=(0,r.useRef)(null),[t,a]=(0,r.useState)(!1),[l,o]=(0,r.useState)(!1),[i,f]=(0,r.useState)(""),[d,x]=(0,r.useState)([]),[m,h]=(0,r.useState)([]),[u,p]=(0,r.useState)(!1),[y,w]=(0,r.useState)(-1),j=(0,n.useRouter)(),b=(0,r.useRef)(null),v=(0,r.useRef)(null),g=(0,r.useRef)(null),k=()=>{o(!0),setTimeout(()=>{a(!1),o(!1)},300)};(0,r.useEffect)(()=>{(async()=>{try{let e=await fetch("/tags.json",{cache:"force-cache"});if(e.ok){let t=await e.json();x(t)}else x(["日常"])}catch(e){console.error("Failed to fetch /tags.json",e),x(["日常"])}})()},[]);let N=(0,r.useCallback)(async t=>{let a=t.trim();if(!a)return void h([]);p(!0);try{if(!e.current){let t=await fetch("/search.json",{cache:"force-cache"});if(!t.ok)throw Error("fetch /search.json failed");e.current=await t.json()}let t=e.current||[],r=a.toLowerCase(),n=[];for(let e of t){var s;let t=null==(s=e.title)?void 0:s.toLowerCase().includes(r),a=(e.tags||[]).some(e=>String(e).toLowerCase().includes(r)),l=(e.summary||e.snippet||"").toLowerCase().includes(r);t?n.push([3,"title",e]):a?n.push([2,"tag",e]):l&&n.push([1,"content",e])}n.sort((e,t)=>t[0]-e[0]);let l=n.slice(0,30).map(e=>{let[,t,a]=e;return{...a,matchType:t}});h(l)}catch(e){console.error("Search error:",e),h([])}finally{p(!1)}},[]);(0,r.useEffect)(()=>()=>{g.current&&clearTimeout(g.current)},[]),(0,r.useEffect)(()=>{if(t){let e=requestAnimationFrame(()=>{var e;return null==(e=b.current)?void 0:e.focus()});return()=>cancelAnimationFrame(e)}h([]),w(-1),f("")},[t]),(0,r.useEffect)(()=>{function e(e){var s,r,n;"Escape"===e.key&&k(),"/"!==e.key||t||(null==(s=e.target)?void 0:s.tagName)==="INPUT"||(null==(r=e.target)?void 0:r.tagName)==="TEXTAREA"||(null==(n=e.target)?void 0:n.isContentEditable)||(e.preventDefault(),a(!0))}return window.addEventListener("keydown",e),()=>{window.removeEventListener("keydown",e)}},[t]);let z=(e,t)=>{if(!t||!e)return e;let a=RegExp("(".concat(t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),")"),"gi");return e.split(a).map((e,t)=>a.test(e)?(0,s.jsx)("mark",{className:"bg-yellow-400 text-black px-1 rounded",children:e},t):e)};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("button",{ref:v,"aria-label":"Search",onClick:()=>a(e=>!e),className:"jsx-7e07ef333733125f p-2 rounded-xl text-white/90 hover:text-white hover:bg-white/10 transition-all duration-200 hover:scale-105",children:(0,s.jsx)("svg",{viewBox:"0 0 24 24",fill:"none","aria-hidden":"true",className:"jsx-7e07ef333733125f h-5 w-5",children:(0,s.jsx)("path",{d:"M21 21l-4.2-4.2M10.5 18a7.5 7.5 0 1 1 0-15 7.5 7.5 0 0 1 0 15z",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round",className:"jsx-7e07ef333733125f"})})}),t&&(0,s.jsxs)("div",{className:"jsx-7e07ef333733125f fixed inset-0 z-50 flex items-start justify-center",children:[(0,s.jsx)("div",{onClick:k,className:"jsx-7e07ef333733125f "+"absolute inset-0 bg-black/60 backdrop-blur-sm transition-opacity duration-300 ".concat(l?"opacity-0":"opacity-100")}),(0,s.jsx)("div",{className:"jsx-7e07ef333733125f "+"relative w-full max-w-4xl mx-4 mt-32 transform transition-all duration-300 ease-out ".concat(l?"translate-y-8 opacity-0 scale-95":"translate-y-0 opacity-100 scale-100"),children:(0,s.jsxs)("div",{className:"jsx-7e07ef333733125f "+"bg-[#1a1f2e]/95 backdrop-blur-xl border border-white/10 rounded-2xl shadow-2xl overflow-hidden ".concat(l?"animate-float-down":"animate-float-up"),children:[(0,s.jsxs)("form",{onSubmit:function(e){e.preventDefault()},className:"jsx-7e07ef333733125f p-8",children:[(0,s.jsxs)("div",{className:"jsx-7e07ef333733125f flex items-center gap-6 mb-6",children:[(0,s.jsx)("svg",{viewBox:"0 0 24 24",fill:"none",className:"jsx-7e07ef333733125f "+"h-8 w-8 text-white/70 flex-shrink-0 transform transition-all duration-300 ".concat(l?"scale-75 opacity-0 delay-0":"scale-100 opacity-100 delay-100"),children:(0,s.jsx)("path",{d:"M21 21l-4.2-4.2M10.5 18a7.5 7.5 0 1 1 0-15 7.5 7.5 0 0 1 0 15z",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round",className:"jsx-7e07ef333733125f"})}),(0,s.jsx)("input",{ref:b,value:i,onChange:e=>{let t=e.target.value;f(t),w(-1),g.current&&clearTimeout(g.current),g.current=setTimeout(()=>{N(t)},300)},onKeyDown:e=>{if(m.length){if("ArrowDown"===e.key)e.preventDefault(),w(e=>e<m.length-1?e+1:e);else if("ArrowUp"===e.key)e.preventDefault(),w(e=>e>0?e-1:-1);else if("Enter"===e.key&&y>=0){e.preventDefault();let t=m[y];t&&(k(),setTimeout(()=>j.push(t.url),300))}}},placeholder:"搜尋文章、內容、標籤…",className:"jsx-7e07ef333733125f "+"flex-1 bg-transparent outline-none text-white placeholder:text-white/50 text-2xl py-3 \n                              transform transition-all duration-300 ".concat(l?"translate-x-4 opacity-0 delay-0":"translate-x-0 opacity-100 delay-200")}),u&&(0,s.jsx)("div",{className:"jsx-7e07ef333733125f animate-spin h-6 w-6 border-2 border-white/20 border-t-white/70 rounded-full"}),(0,s.jsx)("button",{type:"button",onClick:k,"aria-label":"Close",className:"jsx-7e07ef333733125f "+"p-3 rounded-lg hover:bg-white/10 text-white/70 hover:text-white transition-all duration-200 \n                              hover:scale-105 transform ".concat(l?"scale-75 opacity-0 delay-0":"scale-100 opacity-100 delay-300"),children:(0,s.jsxs)("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",className:"jsx-7e07ef333733125f w-6 h-6",children:[(0,s.jsx)("line",{x1:"18",y1:"6",x2:"6",y2:"18",className:"jsx-7e07ef333733125f"}),(0,s.jsx)("line",{x1:"6",y1:"6",x2:"18",y2:"18",className:"jsx-7e07ef333733125f"})]})})]}),i.length>=1&&(0,s.jsx)("div",{className:"jsx-7e07ef333733125f "+"mb-6 transform transition-all duration-300 ".concat(l?"translate-y-4 opacity-0 delay-0":"translate-y-0 opacity-100 delay-300"),children:m.length>0?(0,s.jsxs)("div",{className:"jsx-7e07ef333733125f space-y-3 max-h-96 overflow-y-auto scrollbar-hide p-2 -m-2",children:[(0,s.jsxs)("div",{className:"jsx-7e07ef333733125f text-sm text-white/60 mb-3",children:["找到 ",m.length," 個結果"]}),m.map((e,t)=>(0,s.jsxs)("div",{onClick:()=>{k(),setTimeout(()=>j.push(e.url),300)},className:"jsx-7e07ef333733125f "+"p-4 rounded-xl cursor-pointer border transition-all duration-200 transform hover:scale-[1.02] ".concat(t===y?"bg-sky-500/20 border-sky-500/50 scale-[1.02]":"bg-white/5 border-white/10 hover:bg-white/10 hover:border-white/20"),children:[(0,s.jsxs)("div",{className:"jsx-7e07ef333733125f flex items-start justify-between mb-2",children:[(0,s.jsx)("h3",{className:"jsx-7e07ef333733125f text-white font-medium text-lg",children:z(e.title,i)}),(0,s.jsxs)("div",{className:"jsx-7e07ef333733125f flex items-center gap-2 text-sm text-white/50",children:["title"===e.matchType&&(0,s.jsx)("span",{className:"jsx-7e07ef333733125f px-2 py-1 bg-blue-500/20 text-blue-300 rounded text-xs",children:"標題"}),"tag"===e.matchType&&(0,s.jsx)("span",{className:"jsx-7e07ef333733125f px-2 py-1 bg-green-500/20 text-green-300 rounded text-xs",children:"標籤"}),"content"===e.matchType&&(0,s.jsx)("span",{className:"jsx-7e07ef333733125f px-2 py-1 bg-orange-500/20 text-orange-300 rounded text-xs",children:"內容"})]})]}),e.summary&&(0,s.jsx)("p",{className:"jsx-7e07ef333733125f text-white/70 text-sm mb-2",children:z(e.summary,i)}),e.snippet&&(0,s.jsx)("p",{className:"jsx-7e07ef333733125f text-white/60 text-sm mb-3",children:z(e.snippet,i)}),(0,s.jsxs)("div",{className:"jsx-7e07ef333733125f flex items-center justify-between",children:[e.tags.length>0&&(0,s.jsx)("div",{className:"jsx-7e07ef333733125f flex gap-2",children:e.tags.slice(0,3).map((e,t)=>(0,s.jsx)("span",{className:"jsx-7e07ef333733125f px-2 py-1 bg-white/10 text-white/70 rounded text-xs",children:e},t))}),e.date&&(0,s.jsx)("span",{className:"jsx-7e07ef333733125f text-white/50 text-xs",children:new Date(e.date).toLocaleDateString()})]})]},e.id))]}):!u&&(0,s.jsx)("div",{className:"jsx-7e07ef333733125f text-center py-8 text-white/50",children:"沒有找到符合的結果"})}),(0,s.jsxs)("div",{className:"jsx-7e07ef333733125f "+"flex items-center justify-between transform transition-all duration-300 ".concat(l?"translate-y-4 opacity-0 delay-0":"translate-y-0 opacity-100 delay-400"),children:[(0,s.jsxs)("div",{className:"jsx-7e07ef333733125f flex items-center gap-6 text-base text-white/60",children:[(0,s.jsxs)("div",{className:"jsx-7e07ef333733125f flex items-center gap-2",children:[(0,s.jsx)("span",{className:"jsx-7e07ef333733125f px-3 py-2 rounded bg-white/10 text-sm font-mono",children:"/"}),(0,s.jsx)("span",{className:"jsx-7e07ef333733125f",children:"開啟搜尋"})]}),(0,s.jsxs)("div",{className:"jsx-7e07ef333733125f flex items-center gap-2",children:[(0,s.jsx)("span",{className:"jsx-7e07ef333733125f px-3 py-2 rounded bg-white/10 text-sm font-mono",children:"Esc"}),(0,s.jsx)("span",{className:"jsx-7e07ef333733125f",children:"關閉"})]}),(0,s.jsxs)("div",{className:"jsx-7e07ef333733125f flex items-center gap-2",children:[(0,s.jsx)("span",{className:"jsx-7e07ef333733125f px-3 py-2 rounded bg-white/10 text-sm font-mono",children:"↑↓"}),(0,s.jsx)("span",{className:"jsx-7e07ef333733125f",children:"選擇結果"})]})]}),(0,s.jsx)("div",{className:"jsx-7e07ef333733125f flex items-center gap-4",children:i&&(0,s.jsx)("button",{type:"button",onClick:()=>{f(""),h([])},className:"jsx-7e07ef333733125f px-4 py-2 text-base rounded-lg bg-white/10 hover:bg-white/15 text-white/70 hover:text-white transition-all duration-200 hover:scale-105",children:"清除"})})]})]}),i.length<1&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"jsx-7e07ef333733125f border-t border-white/10"}),(0,s.jsxs)("div",{className:"jsx-7e07ef333733125f p-8",children:[(0,s.jsx)("div",{className:"jsx-7e07ef333733125f "+"text-lg text-white/80 mb-6 font-medium transform transition-all duration-300 ".concat(l?"translate-x-4 opacity-0 delay-0":"translate-x-0 opacity-100 delay-300"),children:"選擇標籤"}),(0,s.jsx)("div",{className:"jsx-7e07ef333733125f grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-3",children:d.map((e,t)=>(0,s.jsx)("button",{onClick:()=>{f(e),w(-1),N(e)},style:{transitionDelay:l?"0ms":"".concat(400+50*t,"ms")},className:"jsx-7e07ef333733125f "+"px-4 py-3 text-sm rounded-xl bg-white/10 hover:bg-sky-500/20 border border-white/10 hover:border-sky-500/50 text-white/80 hover:text-white transition-all duration-200 hover:scale-105 hover:shadow-lg transform ".concat(l?"translate-y-4 opacity-0":"translate-y-0 opacity-100"),children:(0,s.jsxs)("div",{className:"jsx-7e07ef333733125f flex items-center gap-2 justify-center",children:[(0,s.jsxs)("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",className:"jsx-7e07ef333733125f w-4 h-4",children:[(0,s.jsx)("path",{d:"M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z",className:"jsx-7e07ef333733125f"}),(0,s.jsx)("line",{x1:"7",y1:"7",x2:"7.01",y2:"7",className:"jsx-7e07ef333733125f"})]}),e]})},t))}),0===d.length&&(0,s.jsx)("div",{className:"jsx-7e07ef333733125f text-center py-8 text-white/50",children:"載入標籤中..."})]})]})]})})]}),(0,s.jsx)(c(),{id:"7e07ef333733125f",children:"@-webkit-keyframes float-up{0%{-webkit-transform:translatey(20px)scale(.95);transform:translatey(20px)scale(.95);opacity:0}100%{-webkit-transform:translatey(0)scale(1);transform:translatey(0)scale(1);opacity:1}}@-moz-keyframes float-up{0%{-moz-transform:translatey(20px)scale(.95);transform:translatey(20px)scale(.95);opacity:0}100%{-moz-transform:translatey(0)scale(1);transform:translatey(0)scale(1);opacity:1}}@-o-keyframes float-up{0%{-o-transform:translatey(20px)scale(.95);transform:translatey(20px)scale(.95);opacity:0}100%{-o-transform:translatey(0)scale(1);transform:translatey(0)scale(1);opacity:1}}@keyframes float-up{0%{-webkit-transform:translatey(20px)scale(.95);-moz-transform:translatey(20px)scale(.95);-o-transform:translatey(20px)scale(.95);transform:translatey(20px)scale(.95);opacity:0}100%{-webkit-transform:translatey(0)scale(1);-moz-transform:translatey(0)scale(1);-o-transform:translatey(0)scale(1);transform:translatey(0)scale(1);opacity:1}}@-webkit-keyframes float-down{0%{-webkit-transform:translatey(0)scale(1);transform:translatey(0)scale(1);opacity:1}100%{-webkit-transform:translatey(20px)scale(.95);transform:translatey(20px)scale(.95);opacity:0}}@-moz-keyframes float-down{0%{-moz-transform:translatey(0)scale(1);transform:translatey(0)scale(1);opacity:1}100%{-moz-transform:translatey(20px)scale(.95);transform:translatey(20px)scale(.95);opacity:0}}@-o-keyframes float-down{0%{-o-transform:translatey(0)scale(1);transform:translatey(0)scale(1);opacity:1}100%{-o-transform:translatey(20px)scale(.95);transform:translatey(20px)scale(.95);opacity:0}}@keyframes float-down{0%{-webkit-transform:translatey(0)scale(1);-moz-transform:translatey(0)scale(1);-o-transform:translatey(0)scale(1);transform:translatey(0)scale(1);opacity:1}100%{-webkit-transform:translatey(20px)scale(.95);-moz-transform:translatey(20px)scale(.95);-o-transform:translatey(20px)scale(.95);transform:translatey(20px)scale(.95);opacity:0}}.animate-float-up.jsx-7e07ef333733125f{-webkit-animation:float-up.3s cubic-bezier(.4,0,.2,1)forwards;-moz-animation:float-up.3s cubic-bezier(.4,0,.2,1)forwards;-o-animation:float-up.3s cubic-bezier(.4,0,.2,1)forwards;animation:float-up.3s cubic-bezier(.4,0,.2,1)forwards}.animate-float-down.jsx-7e07ef333733125f{-webkit-animation:float-down.3s cubic-bezier(.4,0,.2,1)forwards;-moz-animation:float-down.3s cubic-bezier(.4,0,.2,1)forwards;-o-animation:float-down.3s cubic-bezier(.4,0,.2,1)forwards;animation:float-down.3s cubic-bezier(.4,0,.2,1)forwards}.scrollbar-hide.jsx-7e07ef333733125f{-ms-overflow-style:none;scrollbar-width:none}.scrollbar-hide.jsx-7e07ef333733125f::-webkit-scrollbar{display:none}"})]})}function d(){let e=(0,n.usePathname)(),[t,a]=(0,r.useState)(!1),[l,i]=(0,r.useState)(!1);(0,r.useEffect)(()=>{function e(){a(window.scrollY>30)}return window.addEventListener("scroll",e),()=>window.removeEventListener("scroll",e)},[]);let c=l||!t,d=c?"px-4 py-2 text-lg":"px-2 py-1 text-sm";return(0,s.jsxs)("nav",{className:"fixed top-0 left-0 w-full z-40 px-8 flex items-center transition-all duration-300 bg-[#181e33cc] backdrop-blur-lg shadow-lg border-b border-white/10 "+(c?"h-16 text-xl shadow-md":"h-10 text-base shadow-sm opacity-90 backdrop-blur"),onMouseEnter:()=>i(!0),onMouseLeave:()=>i(!1),children:[(0,s.jsx)(o(),{href:"/",className:"font-bold text-white-200 tracking-wide mr-auto select-none",children:"\uD83E\uDE90 Roku's Universe"}),(0,s.jsxs)("ul",{className:"flex space-x-4 items-center font-medium",children:[(0,s.jsx)("li",{children:(0,s.jsxs)(o(),{href:"/",className:"flex items-center gap-2 rounded-xl transition-all duration-300 ".concat(d,"\n              ").concat("/"===e?"border-2 border-cyan-400 bg-cyan-900/30 text-cyan-300 shadow-[0_0_8px_2px_rgba(6,182,212,0.3)]":"text-gray-300 hover:text-white hover:bg-white/10"),children:[(0,s.jsx)("span",{role:"img","aria-label":"Home",children:"\uD83C\uDF0C"})," Home"]})}),(0,s.jsx)("li",{children:(0,s.jsxs)(o(),{href:"/about",className:"flex items-center gap-2 rounded-xl transition-all duration-300 ".concat(d,"\n              ").concat(e.startsWith("/about")?"border-2 border-cyan-400 bg-cyan-900/30 text-cyan-300 shadow-[0_0_8px_2px_rgba(6,182,212,0.3)]":"text-gray-300 hover:text-white hover:bg-white/10"),children:[(0,s.jsx)("span",{role:"img","aria-label":"About",children:"\uD83C\uDF19"})," About"]})}),(0,s.jsx)("li",{children:(0,s.jsx)(f,{})})]})]})}},4643:(e,t,a)=>{"use strict";a.d(t,{default:()=>l});var s=a(5155),r=a(2115);function n(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:14,s=2*Math.random()*Math.PI,r=Math.random()*a;return{x:e+Math.cos(s)*r,y:t+Math.sin(s)*r}}function l(){let[e,t]=(0,r.useState)([]),[a,l]=(0,r.useState)(null),o=(0,r.useRef)(0);return(0,r.useEffect)(()=>{function e(e){l({x:e.clientX,y:e.clientY});let a=n(e.clientX,e.clientY,14);t(e=>[...e,{id:o.current++,x:a.x,y:a.y,size:1.2+.7*Math.random(),life:400+60*Math.random()}])}window.addEventListener("mousemove",e);let s=setInterval(()=>{if(a){let e=n(a.x,a.y,14);t(t=>[...t,{id:o.current++,x:e.x,y:e.y,size:1.2+.7*Math.random(),life:400+60*Math.random()}])}},150),r=setInterval(()=>{t(e=>e.map(e=>({...e,life:e.life-40})).filter(e=>e.life>0))},40);return()=>{window.removeEventListener("mousemove",e),clearInterval(s),clearInterval(r)}},[a]),(0,s.jsx)("div",{className:"fixed inset-0 pointer-events-none z-50",children:e.map(e=>(0,s.jsx)("div",{style:{position:"fixed",left:e.x-e.size/2,top:e.y-e.size/2,width:e.size,height:e.size,background:"white",opacity:Math.max(0,e.life/400),borderRadius:"50%",boxShadow:"0 0 4px 1.5px #fff, 0 0 8px 0.5px #fff",pointerEvents:"none"}},e.id))})}},5328:(e,t,a)=>{Promise.resolve().then(a.t.bind(a,4147,23)),Promise.resolve().then(a.t.bind(a,8489,23)),Promise.resolve().then(a.t.bind(a,347,23)),Promise.resolve().then(a.bind(a,4643)),Promise.resolve().then(a.bind(a,2965)),Promise.resolve().then(a.bind(a,1382))}},e=>{var t=t=>e(e.s=t);e.O(0,[896,897,441,684,358],()=>t(5328)),_N_E=e.O()}]);